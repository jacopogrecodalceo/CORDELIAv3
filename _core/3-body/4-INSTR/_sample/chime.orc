gSchime_00_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_00.wav"
gichime_00_1		 ftgen 0, 0, 0, 1, gSchime_00_file, 0, 0, 1
gichime_00_2		 ftgen 0, 0, 0, 1, gSchime_00_file, 0, 0, 2
;-------
gSchime_01_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_01.wav"
gichime_01_1		 ftgen 0, 0, 0, 1, gSchime_01_file, 0, 0, 1
gichime_01_2		 ftgen 0, 0, 0, 1, gSchime_01_file, 0, 0, 2
;-------
gSchime_02_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_02.wav"
gichime_02_1		 ftgen 0, 0, 0, 1, gSchime_02_file, 0, 0, 1
gichime_02_2		 ftgen 0, 0, 0, 1, gSchime_02_file, 0, 0, 2
;-------
gSchime_03_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_03.wav"
gichime_03_1		 ftgen 0, 0, 0, 1, gSchime_03_file, 0, 0, 1
gichime_03_2		 ftgen 0, 0, 0, 1, gSchime_03_file, 0, 0, 2
;-------
gSchime_04_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_04.wav"
gichime_04_1		 ftgen 0, 0, 0, 1, gSchime_04_file, 0, 0, 1
gichime_04_2		 ftgen 0, 0, 0, 1, gSchime_04_file, 0, 0, 2
;-------
gSchime_05_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_05.wav"
gichime_05_1		 ftgen 0, 0, 0, 1, gSchime_05_file, 0, 0, 1
gichime_05_2		 ftgen 0, 0, 0, 1, gSchime_05_file, 0, 0, 2
;-------
gSchime_06_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_06.wav"
gichime_06_1		 ftgen 0, 0, 0, 1, gSchime_06_file, 0, 0, 1
gichime_06_2		 ftgen 0, 0, 0, 1, gSchime_06_file, 0, 0, 2
;-------
gSchime_07_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_07.wav"
gichime_07_1		 ftgen 0, 0, 0, 1, gSchime_07_file, 0, 0, 1
gichime_07_2		 ftgen 0, 0, 0, 1, gSchime_07_file, 0, 0, 2
;-------
gSchime_08_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_08.wav"
gichime_08_1		 ftgen 0, 0, 0, 1, gSchime_08_file, 0, 0, 1
gichime_08_2		 ftgen 0, 0, 0, 1, gSchime_08_file, 0, 0, 2
;-------
gSchime_09_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_09.wav"
gichime_09_1		 ftgen 0, 0, 0, 1, gSchime_09_file, 0, 0, 1
gichime_09_2		 ftgen 0, 0, 0, 1, gSchime_09_file, 0, 0, 2
;-------
gSchime_10_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_10.wav"
gichime_10_1		 ftgen 0, 0, 0, 1, gSchime_10_file, 0, 0, 1
gichime_10_2		 ftgen 0, 0, 0, 1, gSchime_10_file, 0, 0, 2
;-------
gSchime_11_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_11.wav"
gichime_11_1		 ftgen 0, 0, 0, 1, gSchime_11_file, 0, 0, 1
gichime_11_2		 ftgen 0, 0, 0, 1, gSchime_11_file, 0, 0, 2
;-------
gSchime_12_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_12.wav"
gichime_12_1		 ftgen 0, 0, 0, 1, gSchime_12_file, 0, 0, 1
gichime_12_2		 ftgen 0, 0, 0, 1, gSchime_12_file, 0, 0, 2
;-------
gSchime_13_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_13.wav"
gichime_13_1		 ftgen 0, 0, 0, 1, gSchime_13_file, 0, 0, 1
gichime_13_2		 ftgen 0, 0, 0, 1, gSchime_13_file, 0, 0, 2
;-------
gSchime_14_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_14.wav"
gichime_14_1		 ftgen 0, 0, 0, 1, gSchime_14_file, 0, 0, 1
gichime_14_2		 ftgen 0, 0, 0, 1, gSchime_14_file, 0, 0, 2
;-------
gSchime_15_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_15.wav"
gichime_15_1		 ftgen 0, 0, 0, 1, gSchime_15_file, 0, 0, 1
gichime_15_2		 ftgen 0, 0, 0, 1, gSchime_15_file, 0, 0, 2
;-------
gSchime_16_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_16.wav"
gichime_16_1		 ftgen 0, 0, 0, 1, gSchime_16_file, 0, 0, 1
gichime_16_2		 ftgen 0, 0, 0, 1, gSchime_16_file, 0, 0, 2
;-------
gSchime_17_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_17.wav"
gichime_17_1		 ftgen 0, 0, 0, 1, gSchime_17_file, 0, 0, 1
gichime_17_2		 ftgen 0, 0, 0, 1, gSchime_17_file, 0, 0, 2
;-------
gSchime_18_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_18.wav"
gichime_18_1		 ftgen 0, 0, 0, 1, gSchime_18_file, 0, 0, 1
gichime_18_2		 ftgen 0, 0, 0, 1, gSchime_18_file, 0, 0, 2
;-------
gSchime_19_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_19.wav"
gichime_19_1		 ftgen 0, 0, 0, 1, gSchime_19_file, 0, 0, 1
gichime_19_2		 ftgen 0, 0, 0, 1, gSchime_19_file, 0, 0, 2
;-------
gSchime_20_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_20.wav"
gichime_20_1		 ftgen 0, 0, 0, 1, gSchime_20_file, 0, 0, 1
gichime_20_2		 ftgen 0, 0, 0, 1, gSchime_20_file, 0, 0, 2
;-------
gSchime_21_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_21.wav"
gichime_21_1		 ftgen 0, 0, 0, 1, gSchime_21_file, 0, 0, 1
gichime_21_2		 ftgen 0, 0, 0, 1, gSchime_21_file, 0, 0, 2
;-------
gSchime_22_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_22.wav"
gichime_22_1		 ftgen 0, 0, 0, 1, gSchime_22_file, 0, 0, 1
gichime_22_2		 ftgen 0, 0, 0, 1, gSchime_22_file, 0, 0, 2
;-------
gSchime_23_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_23.wav"
gichime_23_1		 ftgen 0, 0, 0, 1, gSchime_23_file, 0, 0, 1
gichime_23_2		 ftgen 0, 0, 0, 1, gSchime_23_file, 0, 0, 2
;-------
gSchime_24_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_24.wav"
gichime_24_1		 ftgen 0, 0, 0, 1, gSchime_24_file, 0, 0, 1
gichime_24_2		 ftgen 0, 0, 0, 1, gSchime_24_file, 0, 0, 2
;-------
gSchime_25_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_25.wav"
gichime_25_1		 ftgen 0, 0, 0, 1, gSchime_25_file, 0, 0, 1
gichime_25_2		 ftgen 0, 0, 0, 1, gSchime_25_file, 0, 0, 2
;-------
gSchime_26_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_26.wav"
gichime_26_1		 ftgen 0, 0, 0, 1, gSchime_26_file, 0, 0, 1
gichime_26_2		 ftgen 0, 0, 0, 1, gSchime_26_file, 0, 0, 2
;-------
gSchime_27_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_27.wav"
gichime_27_1		 ftgen 0, 0, 0, 1, gSchime_27_file, 0, 0, 1
gichime_27_2		 ftgen 0, 0, 0, 1, gSchime_27_file, 0, 0, 2
;-------
gSchime_28_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_28.wav"
gichime_28_1		 ftgen 0, 0, 0, 1, gSchime_28_file, 0, 0, 1
gichime_28_2		 ftgen 0, 0, 0, 1, gSchime_28_file, 0, 0, 2
;-------
gSchime_29_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_29.wav"
gichime_29_1		 ftgen 0, 0, 0, 1, gSchime_29_file, 0, 0, 1
gichime_29_2		 ftgen 0, 0, 0, 1, gSchime_29_file, 0, 0, 2
;-------
gSchime_30_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_30.wav"
gichime_30_1		 ftgen 0, 0, 0, 1, gSchime_30_file, 0, 0, 1
gichime_30_2		 ftgen 0, 0, 0, 1, gSchime_30_file, 0, 0, 2
;-------
gSchime_31_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_31.wav"
gichime_31_1		 ftgen 0, 0, 0, 1, gSchime_31_file, 0, 0, 1
gichime_31_2		 ftgen 0, 0, 0, 1, gSchime_31_file, 0, 0, 2
;-------
gSchime_32_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_32.wav"
gichime_32_1		 ftgen 0, 0, 0, 1, gSchime_32_file, 0, 0, 1
gichime_32_2		 ftgen 0, 0, 0, 1, gSchime_32_file, 0, 0, 2
;-------
gSchime_33_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_33.wav"
gichime_33_1		 ftgen 0, 0, 0, 1, gSchime_33_file, 0, 0, 1
gichime_33_2		 ftgen 0, 0, 0, 1, gSchime_33_file, 0, 0, 2
;-------
gSchime_34_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_34.wav"
gichime_34_1		 ftgen 0, 0, 0, 1, gSchime_34_file, 0, 0, 1
gichime_34_2		 ftgen 0, 0, 0, 1, gSchime_34_file, 0, 0, 2
;-------
gSchime_35_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_35.wav"
gichime_35_1		 ftgen 0, 0, 0, 1, gSchime_35_file, 0, 0, 1
gichime_35_2		 ftgen 0, 0, 0, 1, gSchime_35_file, 0, 0, 2
;-------
gSchime_36_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_36.wav"
gichime_36_1		 ftgen 0, 0, 0, 1, gSchime_36_file, 0, 0, 1
gichime_36_2		 ftgen 0, 0, 0, 1, gSchime_36_file, 0, 0, 2
;-------
gSchime_37_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_37.wav"
gichime_37_1		 ftgen 0, 0, 0, 1, gSchime_37_file, 0, 0, 1
gichime_37_2		 ftgen 0, 0, 0, 1, gSchime_37_file, 0, 0, 2
;-------
gSchime_38_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_38.wav"
gichime_38_1		 ftgen 0, 0, 0, 1, gSchime_38_file, 0, 0, 1
gichime_38_2		 ftgen 0, 0, 0, 1, gSchime_38_file, 0, 0, 2
;-------
gSchime_39_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_39.wav"
gichime_39_1		 ftgen 0, 0, 0, 1, gSchime_39_file, 0, 0, 1
gichime_39_2		 ftgen 0, 0, 0, 1, gSchime_39_file, 0, 0, 2
;-------
gSchime_40_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_40.wav"
gichime_40_1		 ftgen 0, 0, 0, 1, gSchime_40_file, 0, 0, 1
gichime_40_2		 ftgen 0, 0, 0, 1, gSchime_40_file, 0, 0, 2
;-------
gSchime_41_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_41.wav"
gichime_41_1		 ftgen 0, 0, 0, 1, gSchime_41_file, 0, 0, 1
gichime_41_2		 ftgen 0, 0, 0, 1, gSchime_41_file, 0, 0, 2
;-------
gSchime_42_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_42.wav"
gichime_42_1		 ftgen 0, 0, 0, 1, gSchime_42_file, 0, 0, 1
gichime_42_2		 ftgen 0, 0, 0, 1, gSchime_42_file, 0, 0, 2
;-------
gSchime_43_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_43.wav"
gichime_43_1		 ftgen 0, 0, 0, 1, gSchime_43_file, 0, 0, 1
gichime_43_2		 ftgen 0, 0, 0, 1, gSchime_43_file, 0, 0, 2
;-------
gSchime_44_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_44.wav"
gichime_44_1		 ftgen 0, 0, 0, 1, gSchime_44_file, 0, 0, 1
gichime_44_2		 ftgen 0, 0, 0, 1, gSchime_44_file, 0, 0, 2
;-------
gSchime_45_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_45.wav"
gichime_45_1		 ftgen 0, 0, 0, 1, gSchime_45_file, 0, 0, 1
gichime_45_2		 ftgen 0, 0, 0, 1, gSchime_45_file, 0, 0, 2
;-------
gSchime_46_file 	 init "/Users/j/Documents/PROJECTs/CORDELIA/samples/chime/chime_46.wav"
gichime_46_1		 ftgen 0, 0, 0, 1, gSchime_46_file, 0, 0, 1
gichime_46_2		 ftgen 0, 0, 0, 1, gSchime_46_file, 0, 0, 2
;-------
gichime_sonvs[]			fillarray	gichime_00_1, gichime_00_2, gichime_01_1, gichime_01_2, gichime_02_1, gichime_02_2, gichime_03_1, gichime_03_2, gichime_04_1, gichime_04_2, gichime_05_1, gichime_05_2, gichime_06_1, gichime_06_2, gichime_07_1, gichime_07_2, gichime_08_1, gichime_08_2, gichime_09_1, gichime_09_2, gichime_10_1, gichime_10_2, gichime_11_1, gichime_11_2, gichime_12_1, gichime_12_2, gichime_13_1, gichime_13_2, gichime_14_1, gichime_14_2, gichime_15_1, gichime_15_2, gichime_16_1, gichime_16_2, gichime_17_1, gichime_17_2, gichime_18_1, gichime_18_2, gichime_19_1, gichime_19_2, gichime_20_1, gichime_20_2, gichime_21_1, gichime_21_2, gichime_22_1, gichime_22_2, gichime_23_1, gichime_23_2, gichime_24_1, gichime_24_2, gichime_25_1, gichime_25_2, gichime_26_1, gichime_26_2, gichime_27_1, gichime_27_2, gichime_28_1, gichime_28_2, gichime_29_1, gichime_29_2, gichime_30_1, gichime_30_2, gichime_31_1, gichime_31_2, gichime_32_1, gichime_32_2, gichime_33_1, gichime_33_2, gichime_34_1, gichime_34_2, gichime_35_1, gichime_35_2, gichime_36_1, gichime_36_2, gichime_37_1, gichime_37_2, gichime_38_1, gichime_38_2, gichime_39_1, gichime_39_2, gichime_40_1, gichime_40_2, gichime_41_1, gichime_41_2, gichime_42_1, gichime_42_2, gichime_43_1, gichime_43_2, gichime_44_1, gichime_44_2, gichime_45_1, gichime_45_2, gichime_46_1, gichime_46_2;-------
gkchime_time		init 16
gkchime_off		init .005
gkchime_dur		init 1
gkchime_sonvs		init 1
gichime_len		init lenarray(gichime_sonvs)/2

;------------------

	instr chime

imode		init p8
is_opcode	init 1
is_midi		init 2

if imode == is_opcode then

	Sinstr		init "chime"
	idur		init p3
	iamp		init p4
	idiv		init p5%i(gksamp_mod)
	ix			init p6
	ich			init p7
	ioff		i gkchime_off
	
	if ioff!=0 then
		ioff		random 0, ioff
	endif

	isonvs		i gkchime_sonvs%(gichime_len+1)

	korgan	chnget	"heart"
	aorgan	a korgan
	aph	= ((aorgan * idiv)+ioff) % 1

	imod		init ich%2
	ift_sonvs	init gichime_sonvs[isonvs]+imod
	aout	tablei aph, ift_sonvs, 1
	aout	*= cosseg:a(0, ix, 1, idur-(ix*2), 1, ix, 0)
	aout	*= $ampvar

	$mix

elseif imode == is_midi then

	Sinstr		init "chime"
	idur		init p3
	iamp		init p4
	iftenv		init p5
	idiv		init p6%i(gksamp_mod)
	ich			init p7
	isonvs		init p9
	ix			init idur/4
	ioff		i gkchime_off
	
	if ioff!=0 then
		ioff		random 0, ioff
	endif

	isonvs		= isonvs%(gichime_len+1)

	ifreq	init limit(1/idur, .125, idiv/8)
	aph		tablei phasor(ifreq/2), gitri, 1

	imod		init ich%2
	ift_sonvs	init gichime_sonvs[isonvs]+imod
	aout	tablei aph, ift_sonvs, 1
	aout	*= $ampvar

	ienvvar		init idur/5

	$death

else

	Sinstr		init "chime"
	idur		init p3
	iamp		init p4
	iftenv		init p5
	idiv		init p6%i(gksamp_mod)
	ich			init p7
	ix			init idur/4
	ioff		i gkchime_off
	
	if ioff!=0 then
		ioff		random 0, ioff
	endif

	isonvs		i gkchime_sonvs%(gichime_len+1)

	korgan	chnget	"heart"
	aorgan	a korgan
	aph	= ((aorgan * idiv)+ioff) % 1

	imod		init ich%2
	ift_sonvs	init gichime_sonvs[isonvs]+imod
	aout	tablei aph, ift_sonvs, 1
	aout	*= $ampvar

	ienvvar		init idur/5

	$death

endif

	endin

;------------------

	opcode	chime, 0, iJ
idiv, kamp xin

if kamp == -1 then
	kamp = $f
endif

Sinstr	init "chime"
imax	init 8
kndx 	init 1

is_opcode init 1

if 	hex("8", gkchime_time) == 1 then

	if kndx == imax+1 then
		kndx = 1
	endif

	kdur	= gkbeats*gkchime_dur

	kx		= kdur/4

	kch		= 1

	until kch > ginchnls do
		schedulek nstrnum(Sinstr)+(kndx/1000), 0, kdur+kx, kamp, idiv, kx, kch, is_opcode
		#ifdef	printscore
			kdone	system gkabstime, sprintfk("echo \'i\t\"%s\"\t%f\t%f\t%f\t%i\t%f\' >> %s", Sinstr, gkabstime, kdur, kamp, kenv, kcps1, kch, gScorename)
		#end
		if	kch == 1 then
			printsk "• %s\t%.1fs | %.3f | %.2f\n", Sinstr, kamp, kdur+kx, idiv
		endif
		kch += 1
	od
	kndx += 1
endif

	endop

	opcode	chime, 0, kJ
kdiv, kamp xin

if kamp == -1 then
	kamp = $f
endif

Sinstr	init "chime"
imax	init 8
kndx 	init 1

is_opcode init 1

if 	hex("8", gkchime_time) == 1 then

	if kndx == imax+1 then
		kndx = 1
	endif

	kdur	= gkbeats*gkchime_dur

	kx		= kdur/4

	kch		= 1

	until kch > ginchnls do
		schedulek nstrnum(Sinstr)+(kndx/1000), 0, kdur+kx, kamp, kdiv, kx, kch, is_opcode
		#ifdef	printscore
			kdone	system gkabstime, sprintfk("echo \'i\t\"%s\"\t%f\t%f\t%f\t%i\t%f\' >> %s", Sinstr, gkabstime, kdur, kamp, kenv, kcps1, kch, gScorename)
		#end
		if	kch == 1 then
			printsk "• %s\t%.1fs | %.3f | %.2f\n", Sinstr, kamp, kdur+kx, kdiv
		endif
		kch += 1
	od
	kndx += 1
endif

	endop	
